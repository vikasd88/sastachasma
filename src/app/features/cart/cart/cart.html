<div class="cart-container">
  <h2>Your Shopping Cart</h2>

  @if (cartItems.length > 0) {
    <div class="cart-items">
      @for (item of cartItems; track item.id) {
        <div class="cart-item">
          <img [src]="item.sanitizedImageUrl" [alt]="item.name" class="cart-item-image">
          <div class="item-details">
            <h3>{{ item.name }}</h3>
            <p>Price: ${{ item.price | number:'1.2-2' }}</p>
            <div class="quantity-control">
              <label for="quantity-{{item.id}}">Quantity:</label>
              <input type="number" id="quantity-{{item.id}}" [(ngModel)]="item.quantity" (change)="updateQuantity(item.id, $event)" min="1">
            </div>
            <p>Item Total: ${{ (item.price * item.quantity) | number:'1.2-2' }}</p>
            <button (click)="removeFromCart(item.id)">Remove</button>
          </div>
        </div>
      }
    </div>

    <div class="cart-summary">
      <p>Subtotal: ${{ subtotal | number:'1.2-2' }}</p>
      <p>Tax ({{ taxRate | percent }}) : ${{ taxAmount | number:'1.2-2' }}</p>
      <p>Other Charges: ${{ otherCharges | number:'1.2-2' }}</p>
      <h3>Total: ${{ totalAmount | number:'1.2-2' }}</h3>
      <button (click)="clearCart()">Clear Cart</button> &nbsp;
      <button (click)="proceedToCheckout()">Proceed to Checkout</button>
    </div>
  } @else {
    <p>Your cart is empty.</p>
  }
</div>
